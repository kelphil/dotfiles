#!/usr/bin/env zsh

#+------------------------------------------------------------------------------------------
# Local ZSHRC Setup by Kelvin Philip
#+------------------------------------------------------------------------------------------

#+------------------------------------------------------------------------------------------
# ENV Setup Paths
#+------------------------------------------------------------------------------------------
export USERBIN=$HOME/bin
export INCLUDES=$HOME/.local/share/.env

# If you come from bash you might have to change your $PATH.
export PATH=$HOME/bin:/usr/local/bin:$PATH

#+------------------------------------------------------------------------------------------
# Oh My ZSH Theme
#+------------------------------------------------------------------------------------------
# Path to your oh-my-zsh installation.
export ZSH=$HOME/.oh-my-zsh

# ZSH Theme
ZSH_THEME="robbyrussell"
#ZSH_THEME="avit"
#ZSH_THEME="agnoster"

#+---------------------------------------------+#
# Plugins
#+---------------------------------------------+#
plugins=(
    git
    zsh-autosuggestions
)

source $ZSH/oh-my-zsh.sh

#+---------------------------------------------+#
# Local ZSHRC File from User
#+---------------------------------------------+#
export PATH=$PATH:$HOME/.local/bin
 
#+---------------------------------------------+#
# Allow Background Processes
#+---------------------------------------------+#
setopt NOHUP

#+---------------------------------------------+#
# Powerline configuration
#+---------------------------------------------+#
if [ -f $HOME/.local/lib/python3.8/site-packages/powerline/bindings/bash/powerline.sh ]; then
    $HOME/.local/bin/powerline-daemon -q
    POWERLINE_BASH_CONTINUATION=1
    POWERLINE_BASH_SELECT=1
    source $HOME/.local/lib/python3.8/site-packages/powerline/bindings/bash/powerline.sh
fi

#+---------------------------------------------+#
# User Config
#+---------------------------------------------+#
export EDITOR='vim'

#+---------------------------------------------+#
# FZF
#+---------------------------------------------+#
export FZF_DEFAULT_COMMAND='rg --files --no-ignore --hidden --follow --glob "!.git/*"'
export FZF_DEFAULT_OPTS='--height 40% --layout=reverse --border --ansi --preview "bat --style=numbers --color=always --line-range :500 {}"'

#+---------------------------------------------+#
# Source Master Aliases File
#+---------------------------------------------+#
source $DOTFILES/.alias

#+---------------------------------------------+#
# General Aliases
#+---------------------------------------------+#
alias c='clear'
alias l='ls -lrath'
alias v='vim'
alias pbcopy=’/usr/bin/xclip -selection clipboard’
alias pbpaste=’/usr/bin/xclip -selection clipboard -o’

#+---------------------------------------------+#
# Command Completion
#+---------------------------------------------+#
source $DOTFILES/kubectl.completion.inc

#+---------------------------------------------+#
# Azure Container Registry
#+---------------------------------------------+#
source ~/.az.acr

#+---------------------------------------------+#
# Flux Completion
#+---------------------------------------------+#
command -v flux >/dev/null && . <(flux completion zsh) && compdef _flux flux

